---
title: CS231A Lecture 2 Review
layout: post
hidden: True
---

# Lecture 2: Camera Models

## pinhole camera

 

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ac84168d-557f-4919-b37f-2632c6456077/5060a8a8-1dcb-4c76-8682-da90415ae76e/image.png)

- 사물의 좌표를 (x,y,z) 이미지 평면에서의 좌표를 (x’,y’)이라고 했을 때, 쉽게 공식을 유도할 수 있다.
    
    pinhole을 원점으로 하는 평면을 잡고 계산하면 비례식에 따라서 초점거리 f와 사물거리 z가 이미지 좌표인 (x’, y’)와 사물 좌표(x, y)와 비례한다. 즉,
    
    $$
    z\cdot(x', y') = f\cdot(x,y)\\
    (x', y') = \frac{f}{z}(x,y)
    $$
    

- 구멍이 작아지면 빛이 적어져 사물이 더 선명해지는 효과가 있다. 그러나 너무 구멍이 작아지면 사물을 제대로 담을 수가 없다.→렌즈를 쓰자!!

## 평행 굴절 렌즈 모델(얇은 렌즈)

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ac84168d-557f-4919-b37f-2632c6456077/3b9e765a-9f96-4199-a01c-f7d591ed79e0/image.png)

- 렌즈는 렌즈에 평행하게 지나는 모든 광선을 ‘초점’으로 모으게 된다.
- 초점을 지나 필름으로 투과되는 점의 좌표도 위와 비슷한 공식으로 설명할 수 있다.
단, 여기서는 focal length f 대신 z’을 사용한다. 즉,
    
    $$
    (x', y') = \frac{z'}{z}(x,y)
    $$
    
- 렌즈의 문제점: 렌즈 끝을 통과하는 광선들은 각도의 왜곡이 생길 수 있다.

## 핀홀 카메라의 기하학(intrinsic)

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ac84168d-557f-4919-b37f-2632c6456077/4a393903-29d4-43c4-b611-6976456824ba/image.png)

- 핀홀 카메라로 촬영된 이미지의 평면 상에서의 좌표는 다음 2가지 스텝을 통해 보정된다.
    1. 오프셋: 기준이 되는 좌표 (c_x, c_y)가 되도록 더해준다.
    2. 실제 거리에서 픽셀거리로 계산할 수 있도록 변환: 픽셀 단위로 계산할 수 있도록 변환계수 k, l을 곱해준다. 이 때, 픽셀이 정사각형이라는 보장이 없으니 k==l이라는 보장도 없다.
- 이 변환은 linear한가? 나누기가 있어서 그렇지 않다. 그럼 행렬 표현은 가능한가? 그냥 좌표계가 아닌 동형 좌표계를 쓴다면 가능하다.
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ac84168d-557f-4919-b37f-2632c6456077/7865cd16-50a8-4975-9c18-91981021c7d7/image.png)
    
    이를 통해 P’=MP=K[I 0]M 형태 등으로 표현할 수 있으며, K를 **카메라 행렬**이라고 한다.
    
- 모종의 사유로 이미지 좌표계 축이 90도가 아닐 수 있다. 이 경우 카메라 행렬은,
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ac84168d-557f-4919-b37f-2632c6456077/d0d98a89-eeb1-4b31-9cc8-a32c75b5664c/image.png)
    
    그리고 이 알파, 베타, 쎄타, c_x, c_y를 카메라의 **intrinsic parameter**라고 한다.
    
    아니 식 유도가 전혀 쉽지 않은데? 구글링해보니 [비슷한 문제를 겪는 친구들](https://blog.immenselyhappy.com/post/camera-axis-skew/)이 있었던 듯
    
    이래저래 회전행렬로 고민했는데 그냥 change of basis 였구나..
    

## 핀홀 카메라의 기하학(extrinsic)

실물 오브젝트에도 좌표계가 있다면 어떻게 카메라 좌표계로 투영 및 변환할 것인가?

### 사전 지식: 2차원, 3차원 homogeneous transformation

- 2차원
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ac84168d-557f-4919-b37f-2632c6456077/64c9a716-e453-4f9d-bbae-ab1a2ae88505/image.png)
    
- 3차원
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ac84168d-557f-4919-b37f-2632c6456077/af66279b-d886-4158-b708-3e61be8611cb/image.png)
    

### Projective Transformation

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ac84168d-557f-4919-b37f-2632c6456077/ed75af04-e9ec-4a0a-9b8c-a9666e3eb01d/image.png)

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ac84168d-557f-4919-b37f-2632c6456077/8157d221-715e-416b-ad97-d088e3943483/image.png)

- 위키를 좀 읽어본 결과, 결국 이 Projective transformation은 4차원 projective space에서 3차원 projective space로 보내는 isomophism이라고 한다. 차원이 다르면 homomorphism 같은데?
- Projective transformation의 특징
    - 점은 점으로, 선은 선으로 보낸다
    - 멀리 있으면 작아 보인다
    - 각도를 보존하지 않는다
    - 평행선은 만난다

## 수업 후기

수학과에서 허구한 날 대수학, 위상수학 예시로 나오던 projective space가 사실은 카메라에서 온 개념이었다? 충격이 아닐 수 없다. 기왕 이렇게 된 거 projective space에 대해 위키를 좀 찾아보고 감을 잡아야겠다.

- [Projective space(math)](https://en.wikipedia.org/wiki/Projective_space)
- [Pinhole camera](https://en.wikipedia.org/wiki/Pinhole_camera_model)
