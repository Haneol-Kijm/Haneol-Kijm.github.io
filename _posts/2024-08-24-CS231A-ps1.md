---
title: CS231A assignment 1
layout: post
draft: true
use_math: true
---

## 1. Projective Geometry Problems

#### (a) Prove that parallel lines in the world reference system are still parallel in the camera reference system.

pf) Define a line in the CRS(camera reference system) to be 3-dimensional plane that pass through $A’_1=[x’_1, y’_1, 1]$ and $A’_2=[x’_2, y’_2, 1]$. Then the parallel planes are defined to be 2 planes such that $\overrightarrow{A_1 A_2}$ and $\overrightarrow{B_1 B_2}$ are parallel. In WRS case, parallel can be defined in exactly the same way. That is,

\\(
(A^1_i-A^2_i)\_{i}=k(B^1_i-B^2_i)\_{i}, i=1,2,3
\\)

for some real $k$.

Performing projective transformation yields the following.

\\(
K\begin{bmatrix}R&T\end{bmatrix}\begin{bmatrix}A^1\\\ 1\end{bmatrix}=K\[RA^1+T\]\\\ \overrightarrow{A’^1 A’^2}\_{x,y} = K\[RA^1-RA^2\]\_{x,y}=kKR\[B^1-B^2\]=\overrightarrow{B’^1 B’^2}\_{x,y}
\\)

Notice that matrix linearity is preserved since translation term cancels out when taking subtraction.

Hence projected lines are parallel.

#### (b) Consider a unit square $pqrs$ in the world reference system where $p, q, r, s$ are points. Will the same square in the camera reference system always have unit area? Prove or provide a counterexample.
pf) Simply consider a case where camera is too much skewed so that $\theta=0$. In that case, the area is always 0.

#### (c) Now let’s consider affine transformations, which are any transformations that preserve parallelism. Affine transformations include not only rotations and translations, but also scaling and shearing. Given some vector p, an affine transformation is defined as $A(p) = Mp + b$ where $M$ is an invertible matrix. Prove that under any affine transformation, the ratio of parallel line segments is invariant, but the ratio of non-parallel line segments is not invariant.
pf) Without loss of generality, since we are considering only the ratio of line segments, we may assume that both lines start at origin $O$. Then $\overrightarrow{O P}$ and $\overrightarrow{O \(rP\)}$ are parallel and have ratio $r$.  
We may also assume that $b=0$, since we are only considering ratio and translation term is canceled out when computing the length of the line segment.  
Now the ratio after the affine map is easily computed since it is the ratio between $\overrightarrow{O \(MP\)}$ and $\overrightarrow{O \(rMP\)}$  
For non-parallel case, consider 2-d affine map $A$ that is defined by $2\times 2$ matrix which acts on 2 unit vectors having orign as starting point and having $(1,0)$ and $(0,1)$ as endpoint whose ratio is 1. If

\\(
M=\begin{bmatrix}1&2\\\ 3&5\end{bmatrix}
\\)

Then the output endpoint is $(1,3)$ and $(2,5)$ whose ratio is obviously not 1.

#### (d) You have explored whether these three properties hold for affine transformations. Do these properties hold under any projective transformation? Justify briefly in one or two sentences (no proof needed).
Affine transformation is the transformation on Euclidean cooridnate, and since this can be translated into projective transformation in projective coordinate, it seems that all properties hold for projective case. 



## 2. Affine Camera Calibration

#### (a) Given correspondences for the calibrating grid, solve for the camera parameters using Eq.2. Note that each measurement $(x_i, y_i) ↔ (X_i, Y_i, Z_i)$ yields two linear equations for the 8 unknown camera parameters. Given $N$ corner measurements, we have $2N$ equations and 8 unknowns. Using the given corner correspondences as inputs, complete the method $\textbf{compute camera matrix()}$. You will construct a linear system of equations and solve for the camera parameters to minimize the least-squares error. After doing so, you will return the 3 × 4 affine camera matrix composed of these computed camera parameters. In your written report, submit your code as well as the camera matrix that you compute.

#### (b) After finding the calibrated camera matrix, you will compute the RMS error between the given N image corner coordinates and N corresponding calculated corner locations in $\textbf{rms error()}$. Recall that $RMS_total =\sqrt{((x − x′)^2 + (y − y′)^2)/N}$ Please submit your code and the RMS error for the camera matrix that you found in part (a).

#### (c) Could you calibrate the matrix with only one checkerboard image? Explain briefly in one or two sentences.
